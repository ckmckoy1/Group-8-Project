<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Barcode Scanner Test</title>
    <!-- Include Html5Qrcode Library -->
    <script src="https://unpkg.com/html5-qrcode@2.3.7/minified/html5-qrcode.min.js"></script>
</head>
<body>
    <h1>Barcode Scanner Test</h1>
    <button id="start-scan-btn">Start Scan</button>
    <div id="qr-reader" style="width:500px; display: none;"></div>
    <div id="qr-reader-results"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            function onScanSuccess(decodedText, decodedResult) {
                console.log(`Code scanned = ${decodedText}`, decodedResult);
                document.getElementById('qr-reader-results').innerText = `Decoded Text: ${decodedText}`;
                // Stop scanning after a successful scan
                html5QrCode.stop().then(() => {
                    console.log('Scanning stopped.');
                }).catch(err => {
                    console.error('Error stopping the scanner.', err);
                });
            }

            let html5QrCode;

            document.getElementById('start-scan-btn').addEventListener('click', function() {
                document.getElementById('qr-reader').style.display = 'block';
                html5QrCode = new Html5Qrcode("qr-reader");
                html5QrCode.start(
                    { facingMode: "environment" },
                    { fps: 10, qrbox: 250 },
                    onScanSuccess
                ).catch(err => {
                    console.error('Unable to start scanning.', err);
                });
            });
        });
    </script>
</body>
</html>
